{
  "meta": {
    "project": "WHAGO: Plataforma de Mensagens em Massa via WhatsApp",
    "date": "2025-11-04",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "WHAGO é uma plataforma SaaS multi-usuário que permite o envio eficiente de mensagens em massa via WhatsApp. Utilizando a biblioteca Baileys, a plataforma oferece gerenciamento de múltiplos chips, criação e monitoramento de campanhas, sistema de créditos e planos de assinatura, além de relatórios detalhados e funcionalidades avançadas para empresas de diversos portes.",
  "core_goals": [
    "Permitir que empresas gerenciem múltiplos chips do WhatsApp de forma segura e eficiente.",
    "Oferecer sistema de envio de mensagens em massa por campanhas personalizáveis e com vários formatos de mídia.",
    "Implementar sistema de planos e créditos para controle e cobrança justa do serviço.",
    "Garantir monitoramento em tempo real das campanhas, chips conectados e uso de créditos.",
    "Prover maturação e rotação automática de chips para minimizar riscos de banimentos.",
    "Disponibilizar relatórios detalhados e exportáveis para análise de desempenho e uso financeiro.",
    "Assegurar uma experiência de usuário fluida, responsiva e segura com autenticação e política de privacidade rigorosas."
  ],
  "key_features": [
    "Sistema completo de autenticação com login, registro, recuperação de senha e perfil editável.",
    "Gerenciamento de planos FREE, BUSINESS e ENTERPRISE com limites e recursos escalonáveis.",
    "Conexão e gerenciamento de múltiplos chips WhatsApp via QR Code e monitoramento de status.",
    "Maturador de chips para aquecimento gradual automático (BUSINESS/ENTERPRISE).",
    "Rotação automática de chips com estratégias configuráveis para distribuição de mensagens.",
    "Criação de campanhas com importação de contatos, editor de mensagens com variáveis e mídia.",
    "Configurações avançadas de envio, incluindo agendamento, intervalos randômicos e notificação.",
    "Dashboard operacional com KPIs, gráficos, lista de atividades recentes e painel de campanhas.",
    "Sistema de notificações in-app e por email, além de webhooks para integrações (ENTERPRISE).",
    "API REST completa para integração e automação (ENTERPRISE).",
    "Relatórios avançados exportáveis em múltiplos formatos e agendáveis (BUSINESS/ENTERPRISE).",
    "Interface amigável com design responsivo, states claros e componentes modernos.",
    "Segurança reforçada com criptografia, proteção contra ataques e conformidade LGPD."
  ],
  "user_flow_summary": [
    "Usuário realiza registro via formulário com validação e recebe créditos iniciais.",
    "Após login via JWT, acessa o dashboard com visão geral de créditos e campanhas.",
    "Usuário pode adicionar chips, escaneando QR Code gerado e acompanhando status em tempo real.",
    "Criação de campanha guiada por wizard em etapas: dados básicos, upload contatos, mensagem e confirmação.",
    "Campanha pode ser iniciada, pausada, cancelada e monitorada com feedback instantâneo.",
    "Sistema realiza entrega das mensagens respeitando limites do plano, rotação e maturação dos chips.",
    "Usuário acessa relatórios detalhados, exporta dados e gerencia configurações de conta.",
    "Notificações informam sobre eventos importantes como créditos baixos, status de chips e campanha.",
    "Usuários ENTERPRISE podem integrar via API e configurar webhooks para eventos específicos."
  ],
  "validation_criteria": [
    "Registro com validação de email, senha forte, telefone e documentos conforme plano.",
    "Geração e validação correta de tokens JWT com expiração e refresh.",
    "Limites dos planos respeitados na adição de chips, envio de mensagens e contatos.",
    "Envio de mensagens respeitando intervalo mínimo configurado por plano.",
    "Maturação e rotação automática funcionando conforme as estratégias definidas.",
    "Campanhas armazenadas com status preciso e atualização em tempo real.",
    "Relatórios exportam dados corretos nos formatos PDF, CSV, Excel e JSON.",
    "Notificações exibidas corretamente e emails disparados conforme configuração.",
    "API REST implementada com autenticação via API Key e rate limiting.",
    "Segurança aplicada em todas as rotas protegidas e armazenamento de dados criptografados.",
    "Interface responsiva e acessível com feedback visual consistente em loading, erros e sucesso."
  ],
  "code_summary": {
    "tech_stack": [
      "Python 3.11",
      "FastAPI",
      "Jinja2",
      "Vanilla JavaScript",
      "HTML/CSS",
      "PostgreSQL",
      "Redis",
      "Celery",
      "Node.js (Baileys)",
      "Docker Compose"
    ],
    "features": [
      {
        "name": "Serviço de Frontend via FastAPI",
        "description": "Rotas FastAPI retornam os templates Jinja2 do frontend e expõem arquivos estáticos (CSS/JS) sob /static.",
        "files": [
          "backend/app/routes/frontend.py",
          "backend/app/__init__.py",
          "frontend/templates/base.html",
          "frontend/static/js/app.js"
        ]
      },
      {
        "name": "Fluxos de Autenticação Web",
        "description": "Formulários de login e cadastro consomem a API de autenticação e persistem tokens em localStorage para navegação protegida.",
        "files": [
          "frontend/templates/auth_login.html",
          "frontend/templates/auth_register.html",
          "frontend/static/js/app.js"
        ]
      },
      {
        "name": "Dashboard Operacional",
        "description": "Tela principal exibe KPIs, tendências e atividades consumindo endpoints /dashboard e renderizando tabelas dinâmicas.",
        "files": [
          "frontend/templates/dashboard.html",
          "frontend/static/js/app.js"
        ]
      },
      {
        "name": "Gestão de Campanhas e Chips",
        "description": "Listagens, filtros e status de campanhas e chips são carregados via chamadas REST e apresentados em tabelas responsivas.",
        "files": [
          "frontend/templates/campaigns.html",
          "frontend/templates/chips.html",
          "frontend/static/js/app.js"
        ]
      },
      {
        "name": "Notificações e Relatórios",
        "description": "Componentes de notificações e geração de relatórios lidam com marcação de lidas, downloads e pré-visualização JSON.",
        "files": [
          "frontend/templates/notifications.html",
          "frontend/templates/reports.html",
          "frontend/static/js/app.js"
        ]
      }
    ]
  }
}
